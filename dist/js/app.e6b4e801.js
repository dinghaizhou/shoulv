(function(e){function t(t){for(var a,o,u=t[0],c=t[1],l=t[2],s=0,d=[];s<u.length;s++)o=u[s],r[o]&&d.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={app:0},r={app:0},i=[];function u(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0d38df95":"85332208","chunk-2d0b3127":"9eef3219","chunk-60f0aec7":"57dc8676","chunk-be50ac4e":"886251c0","chunk-05268e50":"3d38c2f1","chunk-60f7692f":"dd9d8e12"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-0d38df95":1,"chunk-60f0aec7":1,"chunk-be50ac4e":1,"chunk-05268e50":1,"chunk-60f7692f":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-0d38df95":"d9d94d79","chunk-2d0b3127":"31d6cfe0","chunk-60f0aec7":"da287e7e","chunk-be50ac4e":"8b5fefc0","chunk-05268e50":"34f92f2e","chunk-60f7692f":"01f7021f"}[e]+".css",r=c.p+a,i=document.getElementsByTagName("link"),u=0;u<i.length;u++){var l=i[u],s=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(s===a||s===r))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){l=d[u],s=l.getAttribute("data-href");if(s===a||s===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.request=a,delete o[e],f.parentNode.removeChild(f),n(i)},f.href=r;var g=document.getElementsByTagName("head")[0];g.appendChild(f)}).then(function(){o[e]=0}));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise(function(t,n){a=r[e]=[t,n]});t.push(a[2]=i);var l,s=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=u(e),l=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+a+": "+o+")");i.type=a,i.request=o,n[1](i)}r[e]=void 0}};var f=setTimeout(function(){l({type:"timeout",target:d})},12e4);d.onerror=d.onload=l,s.appendChild(d)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var f=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],attrs:{id:"app"}},[n("router-view")],1)},r=[],i={name:"app",data:function(){return{name:"122",loading:!1}},mounted:function(){}},u=i,c=n("2877"),l=Object(c["a"])(u,o,r,!1,null,null,null);l.options.__file="App.vue";var s=l.exports,d=n("be94"),f=n("8c4f"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel"},[a("el-row",{staticClass:"panel-top"},[a("el-col",{attrs:{span:18}},[a("img",{staticClass:"pull-left logo",attrs:{src:n("9d64")}}),a("div",{staticClass:"pull-left"},[e._v("爱点击CDP")])]),a("el-col",{staticClass:"logout",attrs:{span:6}},[a("a",{staticClass:"pull-right",attrs:{href:"javascript:;"},on:{click:e.logout}},[e._v("退出")]),a("span",{staticClass:"pull-right"},[e._v("欢迎, haizhou")])])],1),a("div",{staticClass:"panel-menu"},[a("ul",e._l(e.routerList,function(t){return a("router-link",{key:t.path,attrs:{tag:"li",to:"/"+t.path}},[e._v(e._s(t.meta.title))])}),1)]),a("div",{staticClass:"panel-center"},[a("div",{staticClass:"panel-content"},[a("router-view")],1)])],1)},p=[],h={name:"home",data:function(){return{}},props:{},mounted:function(){},computed:{routerList:function(){return this.$store.state.login.router.filter(function(e){return"/"==e.path})[0].children}},methods:{logout:function(){this.$store.commit("loginOut"),location.reload()}}},m=h,v=Object(c["a"])(m,g,p,!1,null,null,null);v.options.__file="Home.vue";var k=v.exports,b=n("2f62");function y(e,t){return!t.meta||!t.meta.role||e.some(function(e){return t.meta.role.indexOf(e)>=0})}var S={state:{title:"33",user:{token:localStorage.getItem("token"),id:"",roles:[]},addRoute:[],router:[]},mutations:{login:function(e,t){e.user.token=t.token,localStorage.setItem("token",t.token)},loginOut:function(e){e.user.token=null,localStorage.removeItem("token")},changePageTile:function(e,t){e.title=t},SET_ROLES:function(e,t){e.user.roles=t},SET_ROUTERS:function(e,t){e.addRoute=t,e.router=O.concat(t)}},actions:{GetInfo:function(e){var t=e.commit;return new Promise(function(e,n){var a=localStorage.getItem("token");setTimeout(function(){var n={};n.roles=1==a?["admin"]:["normal"],t("SET_ROLES",n.roles),e(n)},1e3)})},GenerateRoutes:function(e,t){return new Promise(function(n){var a=P.filter(function(e){return t.indexOf("admin")>=0||!!y(t,e)&&(!(e.children&&e.children.length>0)||(e.children=e.children.filter(function(e){return!!y(t,e)}),!0))});e.commit("SET_ROUTERS",a),n()})}},getters:{addRouters:function(e){return e.addRoute}}},w=n("7f43"),C=n.n(w);C.a.defaults.baseURL="",C.a.defaults.method="post",C.a.defaults.errorHandler=function(e){a["default"].prototype.$message({type:"warning",message:e})},C.a.defaults.loading=!1,C.a.defaults.withCredentials=!0,C.a.defaults.headers.post["content-Type"]="appliction/x-www-form-urlencoded",C.a.interceptors.request.use(function(e){return T.state.login.user.token&&(e.headers.Authorization="Bearer "+T.state.login.user.token),e.loading&&(e.loading.loading=!0),e}),C.a.interceptors.response.use(function(e){e.config.loading&&(e.config.loading.loading=!1);var t=e.data.code;switch(t){case 0:return e.data;default:return C.a.defaults.errorHandler(e.data.msg),Promise.reject(e.data)}},function(e){return e.config.loading&&(e.config.loading.loading=!1),Promise.reject(e)});var _=C.a,R={state:{filterMode:"custom",filters:null,filterResult:{rate:0,searchTotal:0},page:1,pageSize:10,loading_serach:!1,tagId:""},mutations:{changeFilterMode:function(e,t){e.filterMode=t},changeFilterResult:function(e,t){e.filterResult=t},changeFilters:function(e,t){e.filters=t},changePage:function(e,t){e.page=t},changePageSize:function(e,t){e.pageSize=t},changeLoadingChange:function(e,t){e.loading_serach=t},changeTagId:function(e,t){e.tagId=t}},actions:{getFilterResultByFilters:function(e,t){e.commit("changeLoadingChange",!0),_.post("/api/Consumer/search",Object(d["a"])({},t,{page:e.state.page,pageSize:e.state.pageSize})).then(function(n){e.commit("changeLoadingChange",!1),e.commit("changeFilterResult",n.data),e.commit("changeFilters",t)})},getFilterResultById:function(e,t){e.commit("changeLoadingChange",!0),_.post("/api/Consumer/getUserListByTagId",{id:t,page:e.state.page,pageSize:e.state.pageSize}).then(function(n){e.commit("changeLoadingChange",!1),e.commit("changeFilterResult",n.data),e.commit("changeTagId",t)})},getFilterResultByPage:function(e){e.commit("changeLoadingChange",!0),"custom"==e.state.filterMode?_.post("/api/Consumer/search",Object(d["a"])({},e.state.filters,{page:e.state.page,pageSize:e.state.pageSize})).then(function(t){e.commit("changeLoadingChange",!1),e.commit("changeFilterResult",t.data)}):_.post("/api/Consumer/getUserListByTagId",{id:e.state.tagId,page:e.state.page,pageSize:e.state.pageSize}).then(function(t){e.commit("changeLoadingChange",!1),e.commit("changeFilterResult",t.data)})}},getters:{}};a["default"].use(b["a"]);var T=new b["a"].Store({modules:{login:S,user:R}});a["default"].use(f["a"]);var O=[{path:"/login",component:function(){return n.e("chunk-0d38df95").then(n.bind(null,"ede4"))}}],P=[{path:"/",name:"home",component:k,redirect:"/user",meta:{title:"首页"},children:[{name:"user",path:"user",component:function(){return n.e("chunk-60f0aec7").then(n.bind(null,"9419"))},meta:{title:"用户中心"}},{name:"selected",path:"selected",component:function(){return Promise.all([n.e("chunk-be50ac4e"),n.e("chunk-05268e50")]).then(n.bind(null,"35a2"))},meta:{title:"人群优选"}},{name:"insight",path:"insight",component:function(){return Promise.all([n.e("chunk-be50ac4e"),n.e("chunk-60f7692f")]).then(n.bind(null,"f469"))},meta:{title:"用户洞察"}},{path:"/setting",component:function(){return n.e("chunk-2d0b3127").then(n.bind(null,"278d"))},name:"setting",meta:{title:"权限测试",role:["admin","super"]}}]},{path:"*",redirect:"/"}],E=new f["a"]({mode:"hash",routes:O});E.beforeEach(function(e,t,n){T.state.login.user.token?"/login"===e.path?n({path:"/"}):0===T.state.login.user.roles.length?T.dispatch("GetInfo").then(function(t){var a=t.roles;T.dispatch("GenerateRoutes",a).then(function(){E.addRoutes(T.getters.addRouters),n(Object(d["a"])({},e,{replace:!0}))})}).catch(function(e){console.log(e)}):n():"/login"===e.path?n():n("/login")});var j=E,L=n("4587"),x=n.n(L),I=(n("cd2e"),n("9536"),n("f22d")),z=n.n(I),F=n("8c92"),B=n.n(F),$=n("6fe8"),M=n.n($);n("1adc");a["default"].use(M.a),a["default"].prototype.$echarts=z.a,a["default"].prototype.$http=_,a["default"].prototype.$Cookies=B.a,a["default"].use(x.a),a["default"].config.productionTip=!1,new a["default"]({router:j,store:T,render:function(e){return e(s)}}).$mount("#app")},9536:function(e,t,n){},"9d64":function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.e6b4e801.js.map