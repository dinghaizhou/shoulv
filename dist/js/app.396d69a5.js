(function(e){function t(t){for(var a,o,u=t[0],c=t[1],l=t[2],s=0,d=[];s<u.length;s++)o=u[s],r[o]&&d.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={app:0},r={app:0},i=[];function u(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-1d5f9f1a":"277bc2a1","chunk-2d0b3127":"e28b612a","chunk-505c6698":"3661d94b","chunk-7f9043ab":"bf3c9099","chunk-58306b04":"f9c653be","chunk-b078d130":"34a63167"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-1d5f9f1a":1,"chunk-505c6698":1,"chunk-7f9043ab":1,"chunk-58306b04":1,"chunk-b078d130":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-1d5f9f1a":"d9d94d79","chunk-2d0b3127":"31d6cfe0","chunk-505c6698":"2ea0ff54","chunk-7f9043ab":"8b5fefc0","chunk-58306b04":"126f5dbb","chunk-b078d130":"34f92f2e"}[e]+".css",r=c.p+a,i=document.getElementsByTagName("link"),u=0;u<i.length;u++){var l=i[u],s=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(s===a||s===r))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){l=d[u],s=l.getAttribute("data-href");if(s===a||s===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.request=a,delete o[e],f.parentNode.removeChild(f),n(i)},f.href=r;var g=document.getElementsByTagName("head")[0];g.appendChild(f)}).then(function(){o[e]=0}));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise(function(t,n){a=r[e]=[t,n]});t.push(a[2]=i);var l,s=document.createElement("script");s.charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.src=u(e),l=function(t){s.onerror=s.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+a+": "+o+")");i.type=a,i.request=o,n[1](i)}r[e]=void 0}};var d=setTimeout(function(){l({type:"timeout",target:s})},12e4);s.onerror=s.onload=l,document.head.appendChild(s)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var f=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("ff66"),n("ea23"),n("dbff");var a=n("3a00"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],attrs:{id:"app"}},[n("router-view")],1)},r=[],i={name:"app",data:function(){return{name:"122",loading:!1}},mounted:function(){}},u=i,c=n("c46c"),l=Object(c["a"])(u,o,r,!1,null,null,null);l.options.__file="App.vue";var s=l.exports,d=n("de57"),f=n("081a"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel"},[a("el-row",{staticClass:"panel-top"},[a("el-col",{attrs:{span:18}},[a("img",{staticClass:"pull-left logo",attrs:{src:n("9d64")}}),a("div",{staticClass:"pull-left"},[e._v("爱点击CDP")])]),a("el-col",{staticClass:"logout",attrs:{span:6}},[a("a",{staticClass:"pull-right",attrs:{href:"javascript:;"},on:{click:e.logout}},[e._v("退出")]),a("span",{staticClass:"pull-right"},[e._v("欢迎, haizhou")])])],1),a("div",{staticClass:"panel-menu"},[a("ul",e._l(e.routerList,function(t){return a("router-link",{key:t.path,attrs:{tag:"li",to:"/"+t.path}},[e._v(e._s(t.meta.title))])}),1)]),a("div",{staticClass:"panel-center"},[a("div",{staticClass:"panel-content"},[a("router-view")],1)])],1)},p=[],h={name:"home",data:function(){return{}},props:{},mounted:function(){},computed:{routerList:function(){return this.$store.state.login.router.filter(function(e){return"/"==e.path})[0].children}},methods:{logout:function(){this.$store.commit("loginOut"),location.reload()}}},m=h,v=Object(c["a"])(m,g,p,!1,null,null,null);v.options.__file="Home.vue";var b=v.exports,k=n("f2de"),y=n("4b4a"),S=n.n(y);function _(e,t){return!t.meta||!t.meta.role||e.some(function(e){return t.meta.role.indexOf(e)>=0})}var w={state:{title:"33",user:{token:localStorage.getItem("token"),id:"",roles:[]},addRoute:[],router:[]},mutations:{login:function(e,t){e.user.token=t.token,localStorage.setItem("token",t.token)},loginOut:function(e){e.user.token=null,localStorage.removeItem("token")},changePageTile:function(e,t){e.title=t},SET_ROLES:function(e,t){e.user.roles=t},SET_ROUTERS:function(e,t){e.addRoute=t,e.router=j.concat(t)}},actions:{GetInfo:function(e){var t=e.commit;return new S.a(function(e,n){var a=localStorage.getItem("token");setTimeout(function(){var n={};n.roles=1==a?["admin"]:["normal"],t("SET_ROLES",n.roles),e(n)},1e3)})},GenerateRoutes:function(e,t){return new S.a(function(n){var a=L.filter(function(e){return t.indexOf("admin")>=0||!!_(t,e)&&(!(e.children&&e.children.length>0)||(e.children=e.children.filter(function(e){return!!_(t,e)}),!0))});e.commit("SET_ROUTERS",a),n()})}},getters:{addRouters:function(e){return e.addRoute}}},C=n("7f43"),R=n.n(C);R.a.defaults.baseURL="",R.a.defaults.method="post",console.log(Object({NODE_ENV:"production",VUE_APP_TITLE:"p app",BASE_URL:"/"})),R.a.defaults.errorHandler=function(e){a["default"].prototype.$message({type:"warning",message:e})},R.a.defaults.loading=!1,R.a.defaults.withCredentials=!0,R.a.defaults.headers.post["content-Type"]="appliction/x-www-form-urlencoded",R.a.interceptors.request.use(function(e){return E.state.login.user.token&&(e.headers.Authorization="Bearer "+E.state.login.user.token),e.loading&&(e.loading.loading=!0),e}),R.a.interceptors.response.use(function(e){e.config.loading&&(e.config.loading.loading=!1);var t=e.data.code;switch(t){case 0:return e.data;default:return R.a.defaults.errorHandler(e.data.msg),S.a.reject(e.data)}},function(e){return e.config.loading&&(e.config.loading.loading=!1),S.a.reject(e)});var O=R.a,T={state:{filterMode:"custom",filters:null,filterResult:{rate:0,searchTotal:0},page:1,pageSize:10,loading_serach:!1,tagId:""},mutations:{changeFilterMode:function(e,t){e.filterMode=t},changeFilterResult:function(e,t){e.filterResult=t},changeFilters:function(e,t){e.filters=t},changePage:function(e,t){e.page=t},changePageSize:function(e,t){e.pageSize=t},changeLoadingChange:function(e,t){e.loading_serach=t},changeTagId:function(e,t){e.tagId=t}},actions:{getFilterResultByFilters:function(e,t){e.commit("changeLoadingChange",!0),O.post("/api/Consumer/search",Object(d["a"])({},t,{page:e.state.page,pageSize:e.state.pageSize})).then(function(n){e.commit("changeLoadingChange",!1),e.commit("changeFilterResult",n.data),e.commit("changeFilters",t)})},getFilterResultById:function(e,t){e.commit("changeLoadingChange",!0),O.post("/api/Consumer/getUserListByTagId",{id:t,page:e.state.page,pageSize:e.state.pageSize}).then(function(n){e.commit("changeLoadingChange",!1),e.commit("changeFilterResult",n.data),e.commit("changeTagId",t)})},getFilterResultByPage:function(e){e.commit("changeLoadingChange",!0),"custom"==e.state.filterMode?O.post("/api/Consumer/search",Object(d["a"])({},e.state.filters,{page:e.state.page,pageSize:e.state.pageSize})).then(function(t){e.commit("changeLoadingChange",!1),e.commit("changeFilterResult",t.data)}):O.post("/api/Consumer/getUserListByTagId",{id:e.state.tagId,page:e.state.page,pageSize:e.state.pageSize}).then(function(t){e.commit("changeLoadingChange",!1),e.commit("changeFilterResult",t.data)})}},getters:{}};a["default"].use(k["a"]);var E=new k["a"].Store({modules:{login:w,user:T}});a["default"].use(f["a"]);var j=[{path:"/login",component:function(){return n.e("chunk-1d5f9f1a").then(n.bind(null,"ede4"))}}],L=[{path:"/",name:"home",component:b,redirect:"/user",meta:{title:"首页"},children:[{name:"user",path:"user",component:function(){return n.e("chunk-505c6698").then(n.bind(null,"9419"))},meta:{title:"用户中心"}},{name:"selected",path:"selected",component:function(){return Promise.all([n.e("chunk-7f9043ab"),n.e("chunk-b078d130")]).then(n.bind(null,"35a2"))},meta:{title:"人群优选"}},{name:"insight",path:"insight",component:function(){return Promise.all([n.e("chunk-7f9043ab"),n.e("chunk-58306b04")]).then(n.bind(null,"f469"))},meta:{title:"用户洞察"}},{path:"/setting",component:function(){return n.e("chunk-2d0b3127").then(n.bind(null,"278d"))},name:"setting",meta:{title:"权限测试",role:["admin","super"]}}]},{path:"*",redirect:"/"}],P=new f["a"]({mode:"hash",routes:j});P.beforeEach(function(e,t,n){E.state.login.user.token?"/login"===e.path?n({path:"/"}):0===E.state.login.user.roles.length?E.dispatch("GetInfo").then(function(t){var a=t.roles;E.dispatch("GenerateRoutes",a).then(function(){P.addRoutes(E.getters.addRouters),n(Object(d["a"])({},e,{replace:!0}))})}).catch(function(e){console.log(e)}):n():"/login"===e.path?n():n("/login")});var I=P,x=n("4587"),z=n.n(x),F=(n("cd2e"),n("9536"),n("f22d")),B=n.n(F),$=n("8c92"),A=n.n($),M=n("6fe8"),N=n.n(M);a["default"].use(N.a),a["default"].prototype.$echarts=B.a,a["default"].prototype.$http=O,a["default"].prototype.$Cookies=A.a,a["default"].use(z.a),a["default"].config.productionTip=!1,new a["default"]({router:I,store:E,render:function(e){return e(s)}}).$mount("#app")},9536:function(e,t,n){},"9d64":function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.396d69a5.js.map