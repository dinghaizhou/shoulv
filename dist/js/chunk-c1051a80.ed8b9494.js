(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1051a80"],{"1ec0":function(t,e,i){},2301:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"filter-checkbox clearfix"},[i("ul",t._l(t.lists,function(e){return i("li",{key:e.id,class:{active:e.id==t.value},style:{marginBottom:t.bottom,marginRight:t.right},on:{click:function(i){t.select(e)}}},[t._v(t._s(e.name))])}),0)])},s=[],n={name:"filter-checkbox",props:{lists:{default:[]},bottom:{default:"10px"},right:{default:"10px"},value:{default:""}},data:function(){return{result:""}},mounted:function(){this.result=this.value},methods:{select:function(t){this.$emit("input",t.id),this.$emit("change",t)}}},l=n,o=(i("5a84"),i("c46c")),c=Object(o["a"])(l,a,s,!1,null,"4a3b3ce5",null);c.options.__file="FilterCheckbox.vue";e["a"]=c.exports},"2a68":function(t,e,i){},"310c":function(t,e,i){},"35a2":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"selected"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"menu-title"},[t._v(t._s(this.$route.meta.title))])]),a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"button-mini pull-right",staticStyle:{"min-width":"98px","line-height":"30px"},attrs:{type:"primary"},on:{click:function(e){t.addVisiable=!t.addVisiable}}},[t._v("创建人群")])],1)],1),a("div",{staticClass:"innerbox"},[a("el-row",{staticClass:"clearfix",staticStyle:{"margin-bottom":"20px"}},[a("el-input",{staticClass:"pull-left",staticStyle:{width:"322px","margin-right":"30px"},attrs:{placeholder:"请输入搜索内容"},model:{value:t.search_text,callback:function(e){t.search_text=e},expression:"search_text"}}),a("el-button",{staticClass:"button-max pull-left",staticStyle:{"line-height":"38px"},on:{click:t.search}},[t._v("确认")]),a("el-button",{staticClass:"button-max pull-left",staticStyle:{"line-height":"38px"},on:{click:t.cancel_search}},[t._v("取消")])],1),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-row-class-name":"table-header"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{align:"center",prop:"name",label:"人群名称"}}),a("el-table-column",{attrs:{align:"center",prop:"describe",label:"人群描述"}}),a("el-table-column",{attrs:{align:"center",prop:"mode",label:"创建方式"}}),a("el-table-column",{attrs:{align:"center",prop:"type",label:"类型"}}),a("el-table-column",{attrs:{align:"center",prop:"number",label:"包含人数"}}),a("el-table-column",{attrs:{align:"center",prop:"time",label:"创建时间"}}),a("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{color:"#1989FA",margin:"0 30px 0 0"},attrs:{type:"text",size:"small"},on:{click:function(i){t.edit(e.row)}}},[t._v("\n                          编辑\n                          ")]),a("el-button",{staticStyle:{color:"#1989FA",margin:"0 30px 0 0"},attrs:{type:"text",size:"small"},on:{click:function(i){t.insight(e.row)}}},[t._v("\n                          洞察\n                          ")]),a("el-button",{staticStyle:{color:"#1989FA",margin:"0 30px 0 0"},attrs:{type:"text",size:"small"},on:{click:function(i){t.exportPackage(e.row)}}},[t._v("\n                          导出\n                          ")]),a("el-button",{staticStyle:{color:"#f78484",margin:"0 30px 0 0"},attrs:{type:"text",size:"small"},on:{click:function(i){t.deletePackage(e.row)}}},[t._v("\n                          删除\n                          ")])]}}])}),a("div",{attrs:{slot:"empty"},slot:"empty"},[a("img",{staticStyle:{"margin-top":"90px"},attrs:{src:i("ff5b"),alt:""}}),a("div",{staticStyle:{margin:"25px 0 90px","font-size":"14px",color:"#575759"}},[t._v("还未创建人群列表")])])],1),a("div",[a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,50,100,200],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),a("check-dialog",{attrs:{addData:t.addData,visiable:t.checkVisiable},on:{checkConfirm:t.checkConfirm,"update:visiable":function(e){t.checkVisiable=e}}}),a("add-dialog",{attrs:{visiable:t.addVisiable},on:{addConfirm:t.addConfirm,"update:visiable":function(e){t.addVisiable=e}}}),a("edit-dialog",{attrs:{currentRow:t.currentRow,visiable:t.editVisiable},on:{updateTable:t.updateTable,"update:visiable":function(e){t.editVisiable=e}}}),a("insight-dialog",{attrs:{visiable:t.insightVisiable,currentRow:t.currentRow},on:{"update:visiable":function(e){t.insightVisiable=e}}}),a("export-package",{attrs:{currentRow:t.currentRow,visiable:t.packageDialogVisiable},on:{"update:visiable":function(e){t.packageDialogVisiable=e}}}),a("delete-dialog",{attrs:{currentRow:t.currentRow,visiable:t.deleteVisiable},on:{updateTable:t.updateTable,"update:visiable":function(e){t.deleteVisiable=e}}})],1)},s=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"check-dialog"},[i("el-dialog",{attrs:{title:"创建人群",top:"30vh",visible:t.visiable,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.visiable=e}}},[i("div",{staticClass:"text"},[t._v("\n            所上传人群包中包含的人数： "),i("span",{staticClass:"em"},[t._v(t._s(t.addData.uploadCount)+"人")])]),i("div",{staticClass:"text"},[t._v("\n            可创建人群包人数： "),i("span",{staticClass:"em"},[t._v(t._s(t.addData.count)+"人")])]),i("el-button",{staticClass:"button-mini",staticStyle:{"margin-top":"30px","min-width":"98px"},attrs:{type:"primary"},on:{click:t.confirm}},[t._v("\n            创建\n        ")])],1)],1)},l=[],o=(i("ff66"),i("ea23"),i("dbff"),{name:"check-dialog",components:{},props:{visiable:{default:!1},addData:{default:function(){return{}}}},data:function(){return{}},mounted:function(){},methods:{handleClose:function(){this.$emit("update:visiable",!1)},confirm:function(){this.$emit("checkConfirm"),this.$message.success("添加成功")}}}),c=o,r=(i("3c16"),i("c46c")),u=Object(r["a"])(c,n,l,!1,null,"29e98568",null);u.options.__file="CheckDialog.vue";var d=u.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-dialog"},[i("el-dialog",{attrs:{title:"创建人群",top:"15vh",visible:t.visiable,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.visiable=e}}},[i("el-input",{staticStyle:{"margin-top":"15px"},attrs:{maxlength:"10",placeholder:"请输入人群标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}},[i("span",{staticStyle:{"line-height":"40px","font-size":"14px",color:"#DCDFE6"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.title.length)+"/10")])]),i("div",{staticStyle:{position:"relative"}},[i("el-input",{staticStyle:{"margin-top":"20px"},attrs:{type:"textarea",placeholder:"请输入人群描述",resize:"none",maxlength:"50",rows:3},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}}),i("span",{staticClass:"text-length"},[t._v(t._s(t.detail.length)+"/50")])],1),i("div",{staticClass:"title-tips"},[t._v("选择人群包类型")]),i("filter-checkbox",{attrs:{lists:t.typeLists,right:"20px"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),i("div",{staticClass:"title-tips"},[t._v("\n            EXCEL表格形式，大小不超过***\n            "),i("span",{staticStyle:{color:"#1790ff","margin-left":"10px",cursor:"pointer"}},[t._v("下载模版示例")])]),t.show_button?i("div",{staticClass:"upload"},[i("input",{ref:"upload",staticStyle:{display:"none"},attrs:{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",type:"file",id:"packageUpload"},on:{change:t.uploadFile}}),i("label",{attrs:{for:"packageUpload"}},[i("span",{staticStyle:{"margin-right":"10px","font-size":"14px"}},[t._v("+")]),t._v(" 点击上传人群包")])]):i("div",[i("div",{staticClass:"flex-b"},[i("span",{staticStyle:{"line-height":"28px"}},[t._v(t._s(t.file?t.file.name:""))]),i("el-button",{staticStyle:{color:"#f78484",margin:"0 30px 0 0"},attrs:{type:"text",size:"small"},on:{click:t.deletefile}},[t._v("\n                删除\n                ")])],1),i("div",{staticClass:"flex-b",staticStyle:{"align-items":"center"}},[i("div",{staticClass:"process-bar"},[i("div",{staticClass:"inner-bar",style:{width:t.process+"%"}})]),i("div",{staticClass:"process-text"},[t._v("\n                    "+t._s(t.process)+"%\n                ")])])]),i("el-button",{staticClass:"button-mini",staticStyle:{"margin-top":"30px","min-width":"98px"},attrs:{type:"primary"},on:{click:t.confirm}},[t._v("\n            确定\n        ")])],1)],1)},h=[],f=i("2301"),b={name:"add-dialog",components:{FilterCheckbox:f["a"]},props:{visiable:{default:!1}},data:function(){return{title:"",detail:"",typeLists:[{name:"用户ID",id:"userid"}],type:"userid",show_button:!0,process:"0",file:null,filename:"",is_uploading:!1}},mounted:function(){},methods:{handleClose:function(){this.reset(),this.$emit("update:visiable",!1)},uploadFile:function(t){var e=this,i=this.$http.CancelToken,a=this.$refs.upload.files[0];this.file=a;var s=this,n=new FormData;n.append("source",a),this.$http.post("/api/Crowdchoose/upload",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){s.show_button=!1,e.is_uploading=!0;var i=t.loaded/t.total*100|0;e.process=i},cancelToken:new i(function(t){s.cancel=t})}).then(function(t){e.is_uploading=!1,e.filename=t.data.filename}).catch(function(t){e.is_uploading=!1,e.process="0",e.file=null,e.show_button=!0,e.filename=""})},confirm:function(){var t=this;this.filename?this.title?this.detail?this.$http.post("/api/Crowdchoose/import",{name:this.title,describe:this.detail,filename:this.filename,type:this.type}).then(function(e){t.$emit("addConfirm",e.data),t.reset()}):this.$message.warning("请填写描述"):this.$message.warning("请填写标题"):this.$message.warning("请上传文件")},deletefile:function(){this.is_uploading?this.cancel():this.reset()},reset:function(){this.process="0",this.file=null,this.show_button=!0,this.filename="",this.title="",this.detail=""}}},g=b,m=(i("3640"),Object(r["a"])(g,p,h,!1,null,"2a30bcc4",null));m.options.__file="AddDialog.vue";var v=m.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"edit-dialog"},[i("el-dialog",{attrs:{title:"编辑人群",top:"30vh",visible:t.visiable,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.visiable=e}}},[i("el-input",{staticStyle:{"margin-top":"15px"},attrs:{maxlength:"10",placeholder:"请输入人群标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}},[i("span",{staticStyle:{"line-height":"34px","font-size":"14px",color:"#DCDFE6"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.title.length)+"/10")])]),i("div",{staticStyle:{position:"relative"}},[i("el-input",{staticStyle:{"margin-top":"20px"},attrs:{type:"textarea",placeholder:"请输入人群描述",resize:"none",maxlength:"50",rows:3},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}}),i("span",{staticClass:"text-length"},[t._v(t._s(t.detail.length)+"/50")])],1),i("el-button",{staticClass:"button-mini",staticStyle:{"margin-top":"30px","min-width":"98px"},attrs:{type:"primary"},on:{click:t.confirm}},[t._v("\n            确定\n        ")])],1)],1)},_=[],C=(i("c839"),{name:"edit-dialog",components:{},props:{visiable:{default:!1},currentRow:{type:Object,default:function(){return{}}}},data:function(){return{title:"",detail:"",loading:!1}},watch:{currentRow:function(){this.currentRow.name||(this.currentRow.name=""),this.currentRow.describe||(this.currentRow.describe=""),this.title=this.currentRow.name,this.detail=this.currentRow.describe}},mounted:function(){},methods:{handleClose:function(){this.$emit("update:visiable",!1)},confirm:function(){var t=this;this.title&&this.detail?this.$http.post("/api/Crowdchoose/edit",{name:this.title,describe:this.detail,id:this.currentRow.id},{loading:this}).then(function(){t.$message.success("修改成功"),t.$emit("update:visiable",!1),t.$emit("updateTable")}):this.$message.warning("请完善填写内容")}}}),w=C,y=(i("7300"),Object(r["a"])(w,x,_,!1,null,"5792981e",null));y.options.__file="EditDialog.vue";var k=y.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-dialog"},[i("el-dialog",{attrs:{title:"人群洞察",top:"15vh",visible:t.visiable,width:"86%","before-close":t.handleClose},on:{"update:visible":function(e){t.visiable=e}}},[i("active-user",{attrs:{insightData:t.insightData}})],1)],1)},S=[],D=i("8fb9"),R={name:"edit-dialog",components:{ActiveUser:D["a"]},props:{visiable:{default:!1},currentRow:{default:function(){return{}}}},data:function(){return{insightData:{}}},mounted:function(){},watch:{currentRow:function(){var t=this;this.$http.get("/api/Insight/getInsightById",{params:{id:this.currentRow.id}}).then(function(e){t.insightData=e.data}).catch(function(e){t.insightData=null})}},methods:{handleClose:function(){this.$emit("update:visiable",!1)},confirm:function(){}}},V=R,z=(i("9d96"),Object(r["a"])(V,$,S,!1,null,"5622a8b4",null));z.options.__file="InsightDialog.vue";var I=z.exports,F=i("e723"),O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-dialog"},[i("el-dialog",{attrs:{title:"删除人群",top:"30vh",visible:t.visiable,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.visiable=e}}},[i("div",{staticStyle:{"line-height":"60px"}},[t._v("你确定要删除吗")]),i("div",[i("el-button",{staticClass:"button-mini",attrs:{type:"primary"},on:{click:t.confirm}},[t._v("\n                确定\n            ")]),i("el-button",{staticClass:"button-mini",on:{click:t.handleClose}},[t._v("\n                取消\n            ")])],1)])],1)},P=[],T={name:"edit-dialog",components:{},props:{visiable:{default:!1},currentRow:{type:Object,default:function(){return{}}}},data:function(){return{}},mounted:function(){},methods:{handleClose:function(){this.$emit("update:visiable",!1)},confirm:function(){var t=this;this.$http.post("/api/Crowdchoose/del",{id:this.currentRow.id},{loading:this}).then(function(){t.$message.success("删除成功"),t.$emit("update:visiable",!1),t.$emit("updateTable")})}}},j=T,E=(i("85d5"),Object(r["a"])(j,O,P,!1,null,"35bd6b6c",null));E.options.__file="DeleteDialog.vue";var A=E.exports,L={name:"selected",components:{CheckDialog:d,AddDialog:v,EditDialog:k,InsightDialog:I,ExportPackage:F["a"],DeleteDialog:A},data:function(){return{loading:!0,tableData:[],page:1,pageSize:10,total:0,checkVisiable:!1,addVisiable:!1,editVisiable:!1,insightVisiable:!1,packageDialogVisiable:!1,deleteVisiable:!1,currentRow:{},insightData:{PC:25,Moblie:25,Wechat:50,Male:75,Female:25,Online:25,Outline:75},addData:{},search_text:""}},mounted:function(){this.getList()},methods:{handleSizeChange:function(t){this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.page=t,this.getList()},add:function(){},insight:function(t){this.insightVisiable=!0,this.currentRow=t},edit:function(t){this.editVisiable=!0,this.currentRow=t},exportPackage:function(t){this.packageDialogVisiable=!0,this.currentRow=t},deletePackage:function(t){this.deleteVisiable=!0,this.currentRow=t},addConfirm:function(t){this.getList(),this.checkVisiable=!0,this.addVisiable=!1,this.addData=t},checkConfirm:function(){this.checkVisiable=!1},updateTable:function(){this.getList()},getList:function(){var t=this;this.$http.post("/api/Crowdchoose/getCrowdChooselist",{page:this.page,pageSize:this.pageSize},{loading:this}).then(function(e){t.tableData=e.data.list,t.total=e.data.searchTotal})},search:function(){var t=this;this.$http.post("/api/Crowdchoose/getCrowdChooselist",{page:this.page,pageSize:this.pageSize,name:this.search_text},{loading:this}).then(function(e){t.tableData=e.data.list,t.total=e.data.searchTotal})},cancel_search:function(){this.search_text="",this.getList()}}},M=L,U=(i("8e40"),Object(r["a"])(M,a,s,!1,null,"89856060",null));U.options.__file="Selected.vue";e["default"]=U.exports},3640:function(t,e,i){"use strict";var a=i("d241"),s=i.n(a);s.a},"3c16":function(t,e,i){"use strict";var a=i("1ec0"),s=i.n(a);s.a},5782:function(t,e,i){},"5a84":function(t,e,i){"use strict";var a=i("9680"),s=i.n(a);s.a},7300:function(t,e,i){"use strict";var a=i("a616"),s=i.n(a);s.a},"85d5":function(t,e,i){"use strict";var a=i("2a68"),s=i.n(a);s.a},"8e40":function(t,e,i){"use strict";var a=i("310c"),s=i.n(a);s.a},9680:function(t,e,i){},"9d96":function(t,e,i){"use strict";var a=i("b769"),s=i.n(a);s.a},a616:function(t,e,i){},b769:function(t,e,i){},b8ca:function(t,e,i){"use strict";var a=i("5782"),s=i.n(a);s.a},d241:function(t,e,i){},e723:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"export-package"},[i("el-dialog",{attrs:{title:"导出人群包",top:"30vh",visible:t.visiable,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.visiable=e}}},[i("div",[t._v("请选择导出形式")]),i("div",{staticClass:"mode-style"},[i("el-checkbox",{on:{change:t.handleIsAPIChange},model:{value:t.isAPI,callback:function(e){t.isAPI=e},expression:"isAPI"}}),i("span",{staticStyle:{"margin-left":"5px"}},[t._v("API形式")])],1),t.isAPI?i("div",[i("div",{staticClass:"tips"},[t._v("选择要导入的人群包类型")]),i("filterCheckbox",{attrs:{lists:t.list},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1):t._e(),i("div",{staticClass:"mode-style"},[i("el-checkbox",{on:{change:t.handleIsFileChange},model:{value:t.isFile,callback:function(e){t.isFile=e},expression:"isFile"}}),i("span",{staticStyle:{"margin-left":"5px"}},[t._v("文件形式")])],1),t.isFile?i("div",[i("div",{staticClass:"tips"},[t._v("选择要导入的人群包类型")]),i("filterCheckbox",{attrs:{lists:t.list},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1):t._e(),i("div",{staticStyle:{"margin-top":"30px"}},[i("el-button",{staticClass:"button-mini",staticStyle:{"min-width":"98px"},attrs:{type:"primary"},on:{click:t.exportOut}},[t._v("导出")]),i("span",{staticStyle:{"margin-left":"20px",color:"#9fa1a7","font-size":"12px","line-height":"12px","vertical-align":"bottom"}},[t._v("人群数量： "+t._s("/user"==this.$route.path?this.filterResult.searchTotal:t.currentRow.number)+"人")])],1)])],1)},s=[],n=i("de57"),l=(i("ff66"),i("ea23"),i("dbff"),i("2301")),o=i("f2de"),c={name:"export-package",components:{FilterCheckbox:l["a"]},props:{visiable:{default:!1},currentRow:{type:Object,default:function(){return{}}},info:{type:Object,default:function(){return{}}}},computed:Object(n["a"])({},Object(o["b"])({filterMode:function(t){return t.user.filterMode},filters:function(t){return t.user.filters},filterResult:function(t){return t.user.filterResult},tagId:function(t){return t.user.tagId}})),data:function(){return{isAPI:!1,isFile:!0,list:[{name:"用户ID",id:"userid"}],type:"userid"}},mounted:function(){},methods:{handleClose:function(){this.$emit("update:visiable",!1)},handleIsAPIChange:function(t){this.isFile=!t},handleIsFileChange:function(t){this.isAPI=!t},exportOut:function(){var t=this;if("/user"==this.$route.path)if("custom"==this.filterMode){if(!this.filters)return void this.$message.warning("请先筛选出特定人群，再导出");if(0==this.filterResult.searchTotal)return void this.$message.warning("筛选人群数量为零，请重新筛选");this.$http.post("/api/Consumer/exportSearchCrowd",Object(n["a"])({},this.filters),{responseType:"blob"}).then(function(e){t.$emit("update:visiable",!1)}).catch(function(t){console.log(t)})}else{if(!this.tagId)return void this.$message.warning("请先选择人群标签，再导出");if(0==this.filterResult.searchTotal)return void this.$message.warning("筛选人群数量为零，请重新筛选");this.$http.post("/api/Consumer/exportSearchCrowd",{id:this.tagId},{responseType:"blob"}).then(function(e){t.$emit("update:visiable",!1)}).catch(function(t){})}else window.open("api/Crowdchoose/export?id="+this.currentRow.id,"_self")}}},r=c,u=(i("b8ca"),i("c46c")),d=Object(u["a"])(r,a,s,!1,null,"20f5cb8c",null);d.options.__file="ExportPackage.vue";e["a"]=d.exports},ff5b:function(t,e,i){t.exports=i.p+"img/no-vip.20578adb.png"}}]);
//# sourceMappingURL=chunk-c1051a80.ed8b9494.js.map